id: 30342
name: wordsearch
environments:
    beta:
        domain: beta.wordsearch.games
        memory: 1024
        cli-memory: 512
        storage: wordsearch-beta-artifacts
        runtime: 'php-8.1:al2'
        build:
            - 'COMPOSER_MIRROR_PATH_REPOS=1 composer install --prefer-dist --no-interaction --no-dev --no-autoloader'
            - 'composer dump-autoload --optimize'
            - 'php artisan event:cache'
            - 'php artisan config:cache'
            - 'npm ci && npm run build && rm -rf node_modules'
            - 'APP_URL="https://beta.wordsearch.games" php artisan ziggy:generate ./resources/ziggy.generated.js'
        deploy:
            - 'php artisan migrate --force'
    production:
        warm: 10
        domain: wordsearch.games
        memory: 1024
        cli-memory: 512
        storage: wordsearch-production-artifacts
        runtime: 'php-8.1:al2'
        build:
            - 'COMPOSER_MIRROR_PATH_REPOS=1 composer install --prefer-dist --no-interaction --no-dev --no-autoloader'
            - 'composer dump-autoload --optimize'
            - 'php artisan event:cache'
            - 'php artisan config:cache'
            - 'npm ci && npm run build && rm -rf node_modules'
            - 'APP_URL=https://wordsearch.games php artisan ziggy:generate ./resources/ziggy.generated.js'
        deploy:
            - 'php artisan migrate --force'
